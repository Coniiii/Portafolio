---
import "../styles/global.css";

interface Props {
  title: string;
  description?: string;
}

const { title, description } = Astro.props;
---

<html lang="es" class="scroll-smooth">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
    {description && <meta name="description" content={description} />}
  </head>

  <body class="relative min-h-screen font-sans text-slate-800 dark:text-slate-100 bg-slate-50 dark:bg-[#0c1a32] overflow-x-hidden selection:bg-purple-500 selection:text-white transition-colors duration-300">
    
    <div class="fixed inset-0 -z-10 overflow-hidden pointer-events-none">
      <div class="absolute top-0 left-1/4 w-96 h-96 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob dark:hidden"></div>
      <div class="absolute top-0 right-1/4 w-96 h-96 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-2000 dark:hidden"></div>
      <div class="absolute -bottom-32 left-1/3 w-96 h-96 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-30 animate-blob animation-delay-4000 dark:hidden"></div>

      <div class="hidden dark:block absolute top-[-10%] right-[-10%] w-[500px] h-[500px] rounded-full bg-purple-900/40 blur-[100px]"></div>
      <div class="hidden dark:block absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] rounded-full bg-blue-900/40 blur-[100px]"></div>
    </div>

    <div class="flex min-h-screen flex-col">
      {/* Header NAVBAR GLASSMORPHISM */}
      <header
        class="sticky top-0 z-50 w-full border-b border-white/20 bg-white/70 backdrop-blur-md shadow-sm dark:border-white/10 dark:bg-[#0c1a32]/80 transition-all duration-300"
      >
        <div
          class="mx-auto flex max-w-5xl items-center justify-between px-6 py-4"
        >
          <a href="#inicio" class="flex items-center gap-3 group">
            {/* Avatar pequeño */}
            <div
              class="h-10 w-10 overflow-hidden rounded-full border-2 border-purple-500 shadow-md transition-transform group-hover:scale-105"
            >
              <img
                src="/mi_foto.jpg"
                alt="Constanza Olivos"
                class="h-full w-full object-cover"
                loading="lazy"
              />
            </div>
            <div class="flex flex-col leading-tight">
              <span class="text-sm font-bold text-slate-800 dark:text-white">Constanza Olivos</span>
              <span class="text-[10px] uppercase tracking-wider text-purple-600 dark:text-purple-400 font-semibold">
                Ingeniería Civil Computación mención informática
              </span>
            </div>
          </a>

          <nav class="hidden gap-8 text-sm font-medium sm:flex">
            {['Inicio', 'Habilidades', 'Proyectos', 'Contacto'].map((item) => (
              <a
                href={`#${item.toLowerCase()}`}
                class="relative text-slate-600 hover:text-purple-600 dark:text-slate-300 dark:hover:text-purple-400 transition-colors duration-200 after:content-[''] after:absolute after:w-full after:scale-x-0 after:h-0.5 after:bottom-[-4px] after:left-0 after:bg-purple-500 after:origin-bottom-right after:transition-transform after:duration-300 hover:after:scale-x-100 hover:after:origin-bottom-left"
              >
                {item}
              </a>
            ))}
          </nav>

          {/* Botón toggle tema */}
          <button
            id="theme-toggle"
            type="button"
            class="ml-4 inline-flex h-9 w-9 items-center justify-center rounded-lg bg-slate-100 text-slate-600 hover:bg-slate-200 hover:text-purple-600 dark:bg-slate-800 dark:text-slate-300 dark:hover:bg-slate-700 dark:hover:text-purple-400 transition-colors"
            aria-label="Cambiar tema"
          >
            <span class="block dark:hidden">☾</span>
            <span class="hidden dark:block">☼</span>
          </button>
        </div>
      </header>

      {/* Contenido principal */}
      <main class="flex-1 px-4">
        <slot />
      </main>

      {/* Footer */}
      <footer
        class="mt-20 border-t border-slate-200 bg-white/50 backdrop-blur-sm py-8 text-center text-sm text-slate-500 dark:border-white/10 dark:bg-[#0c1a32]/50 dark:text-slate-400"
      >
        <p>
          © {new Date().getFullYear()} Constanza Olivos Fernández.
          <br class="sm:hidden" />
          <span class="hidden sm:inline"> • </span>
          Desarrollado con <span class=" font-semibold">Astro</span> & Tailwind CSS.
        </p>
      </footer>
    </div>

    <script is:inline>
      (function () {
        const root = document.documentElement;
        const key = "theme";
        const stored = localStorage.getItem(key);
        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;

        if (stored === "dark" || (!stored && prefersDark)) {
          root.classList.add("dark");
        } else {
          root.classList.remove("dark");
        }

        const btn = document.querySelector("#theme-toggle");
        if (btn) {
            btn.addEventListener("click", () => {
            const isDark = root.classList.toggle("dark");
            localStorage.setItem(key, isDark ? "dark" : "light");
            });
        }
      })();
    </script>
  </body>
</html>